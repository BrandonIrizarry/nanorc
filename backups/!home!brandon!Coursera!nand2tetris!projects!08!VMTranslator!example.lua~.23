

local text = [[
1
~L:Roses are red,
~L:violets are blue,
2
~L:sugar is sweet,
~L:and so are you!
3
Thus endeth the ~L.
]]

local function metadata ()
	local filename = ""
	local fn_name = ""
	local index = 0

	local function emit (line)
		return line:gsub("~L", filename)
	end

	local function emit_from_text ()
		filename = "poem"

		for line in text:gmatch(".*$") do
			print(emit(line))
		end
	end

	local extras = {
		

	}

	return {
		emit_from_text = emit_from_text
	}
end


metadata().emit_from_text()
